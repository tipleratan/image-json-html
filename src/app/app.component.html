<div class="container py-5">
  <div class="text-center mb-4">
    <h1 class="display-5 fw-bold">Image-Json-Html</h1>
  </div>

  <div class="card p-4 shadow-sm">
    <label for="pdfFile" class="form-label">Choose Image:</label>
    <input type="file" class="form-control mb-3" id="pdfFile" accept=".png, .jpg, .jpeg"
      (change)="onFileSelected($event)">

    <div *ngIf="isMalicious" class="alert alert-danger">
      Warning: The uploaded image contains suspicious or potentially malicious code!
    </div>
    <button class="btn btn-primary w-100" (click)="processWithProgressBar()" [disabled]="isProcessing || !pdfFile">
      Process image to json
    </button>
    <!-- <button class="btn btn-primary w-100" (click)="processWithProgressBar()">Process image to json</button> -->
  </div>
  <div class="progress-container" *ngIf="isProcessing">
    <mat-progress-bar mode="determinate" [value]="progress" color="accent">
    </mat-progress-bar>

    <span class="progress-label">{{ progress | number:'1.0-0' }}% Processing...</span>
  </div>
  <div class="card p-4 shadow-sm">
    <app-code-generator></app-code-generator>
  </div>
  <div *ngIf="cloneReady && showDownloadSection" class="text-center mt-4">
    <p class="text-success">Your cloned PDF is ready!</p>

    <div class="mb-3">
      <iframe *ngIf="pdfPreviewUrl" [src]="pdfPreviewUrl" width="100%" height="500px"
        class="border rounded shadow-sm"></iframe>
    </div>
  </div>
</div>

